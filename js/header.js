$(document).ready(function(){Stun.utils.pjaxReloadHeader=function(){var e=$(".header-nav-menu"),o=$(".header-nav-submenu"),t=$(".header-nav-menu-item"),i=$(".header-nav-btn"),n=i.is(":visible");function a(){t.velocity({height:t.outerHeight()},{complete:function(){o.css({display:"none",opacity:0})}})}var s=!1,c=!1;if($(window).on("resize",Stun.utils.throttle(function(){(n=i.is(":visible"))?(o.removeClass("hide--force"),c&&(a(),c=!1)):o.css({display:"none",opacity:0})},200)),$(document).on("click",function(){e.is(":visible")&&(n&&c&&(a(),c=!1),e.css({display:"none"}),s=!1),d&&(u.removeClass("mode--focus"),d=!1)}),CONFIG.night_mode&&CONFIG.night_mode.enable){var l=!1,d=!1,r="night_mode",u=$(".mode");!function(){var e=!1;try{parseInt(Stun.utils.Cookies().get(r))&&(e=!0)}catch(e){}return e}()?l=!1:(u.addClass("mode--checked"),u.addClass("mode--focus"),$("html").addClass("nightmode"),l=!0),$(".mode").on("click",function(e){e.stopPropagation(),l=!l,d=!d,Stun.utils.Cookies().set(r,l?1:0),u.toggleClass("mode--checked"),u.addClass("mode--focus"),$("html").toggleClass("nightmode")})}i.on("click",function(o){o.stopPropagation(),n&&s&&c&&(a(),c=!1),s=!s,e.velocity("stop").velocity({opacity:s?1:0},{duration:s?200:0,display:s?"block":"none"})});var h=!1;$(".header-nav-submenu-item").on("click",function(){h=!0}),t.on("click",function(e){if(n){var o=$(this).find(".header-nav-submenu");if(o.length){h?h=!1:e.stopPropagation();var i=t.outerHeight(),a=i+Math.floor(o.outerHeight())*o.length,s=0;$(this).outerHeight()>i?(c=!1,s=i):(c=!0,s=a),o.css({display:"block",opacity:1}),$(this).velocity("stop").velocity({height:s},{duration:300}).siblings().velocity({height:i},{duration:300})}}}),t.on("mouseenter",function(){var e=$(this).find(".header-nav-submenu");e.length&&(e.is(":visible")||(n?e.css({display:"block",opacity:1}):(e.removeClass("hide--force"),e.velocity("stop").velocity("transition.slideUpIn",{duration:200}))))}),t.on("mouseleave",function(){var e=$(this).find(".header-nav-submenu");e.length&&(n||(e.addClass("hide--force"),c=!1))})},Stun.utils.pjaxReloadHeaderIcon=function(){CONFIG.header&&CONFIG.header.scrollDownIcon&&$(".header-info-arrow").on("click",function(){$("#container").velocity("scroll",{offset:$("#header").outerHeight()})})},Stun.utils.pjaxReloadHeader(),Stun.utils.pjaxReloadHeaderIcon()});