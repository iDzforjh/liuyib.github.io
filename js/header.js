$(document).ready(function(){var e=$(".header-nav-menu"),o=$(".header-nav-menu > .header-nav-menu-item"),n=$(".header-nav-submenu"),i=!1,t=!1,a=!1;function c(){o.velocity({height:o.height()})}$(window).on("resize",function(){t&&(o.velocity("stop").velocity({height:o.height()},{complete:function(){n.css({display:"none",opacity:0})}}),t=!1)}),$(document).on("click",function(){e.is(":visible")&&(c(),e.css({display:"none"}),i=!1),a&&($(".mode").removeClass("mode--focus"),a=!1)}),$(".mode").on("click",function(e){e.stopPropagation(),a||(a=!0),$(this).toggleClass("mode--checked"),$(this).addClass("mode--focus"),$("html").toggleClass("darkmode")}),$(".header-nav-btn").on("click",function(o){o.stopPropagation(),i=!i,e.velocity("stop").velocity({opacity:i?1:0},{duration:i?200:0,display:i?"block":"none"}),i||c()}),o.on("click",function(e){var n=$(this).find(".header-nav-submenu"),i=o.height(),a=i+n.height()*n.length,c=0;n.length&&(e.stopPropagation(),$(this).height()>i?(t=!1,c=i):(t=!0,c=a),$(this).velocity("stop").velocity({height:c},{duration:300}).siblings().velocity({height:i},{duration:300}))}),o.on("mouseenter",function(){if(!t){var e=$(this).find(".header-nav-submenu");e.length&&e.velocity("stop").velocity({opacity:1},{duration:200,display:"block"})}}),o.on("mouseleave",function(){if(!t){var e=$(this).find(".header-nav-submenu");e.length&&e.css("display","none")}}),Stun.utils.pjaxReloadHeader=function(){CONFIG.header.scrollDownIcon&&$(".header-info-scrolldown").on("click",function(){$("#container").velocity("scroll",{offset:$("#header").height()})})},Stun.utils.pjaxReloadHeader()});