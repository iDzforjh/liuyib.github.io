<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><link rel="manifest" href="/manifest.json"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="liuyib, Liuyib's Blog, Stun hexo liuyib"><meta name="author" content="liuyib"><meta name="description" content="从0到1开发Hexo主题杂谈"><meta name="copyright" content="liuyib"><title>从0到1开发Hexo主题杂谈 | Liuyib's Blog</title><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="theme-color" content="#54bcff"><link rel="manifest" href="/manifest.json?v=1.2.3"><link rel="icon" href="/images/icons/favicon-16x16.png?v=1.2.3" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=1.2.3" type="image/png" sizes="32x32"><link rel="alternate" href="/atom.xml" type="application/atom+xml"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" type="text/css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" type="text/css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=1.2.3"><meta name="google-site-verification" content="_dxRdKposlAngL4xRoCTrJu0sZ7Pp_RhlBF9inxcD5w"><meta name="msvalidate.01" content="18AD1FBA8E286618BB655AAD011085F7"><meta name="baidu-site-verification" content="RQA4RBConA"><meta name="360-site-verification" content="5ef7c260ff4628e3837da4b15be88062"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-146413033-1"></script><script>if("localhost"!==window.location.hostname){function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-146413033-1")}</script><script>var Stun=window.Stun||{},CONFIG={root:"/",algolia:void 0,sidebar:{offsetTop:"20px"},back2top:{enable:!0,animation:!0},reward:!0,fancybox:!0,zoom_image:void 0,gallery_waterfall:{enable:!0,col_width:"220px",gap_x:"10px",gap_y:"10px"},lazyload:{enable:!0,placeholder:"gif"},external_link:{icon:{enable:!0,name:"external-link"}},shortcuts:{switch_post:!0},notification:{copy_success:"复制成功",copy_error:"复制失败"}};window.CONFIG=CONFIG</script></head><body><div id="container"><header id="header" style="background-image:url(https://raw.githubusercontent.com/liuyib/picBed/master/hexo-blog/20190529223722.jpg)"><nav class="header-nav slider-up"><div class="header-nav-inner"><div class="fa fa-bars header-nav-menu-icon"></div><div class="header-nav-search"><i class="fa fa-search"></i><span>搜索</span></div><div class="header-nav-menu"><span><a href="/"><i class="fa fa-home"></i>首页</a></span><span><a href="/archives/"><i class="fa fa-folder-open"></i>归档</a></span><span><a href="/categories/"><i class="fa fa-th"></i>分类</a></span><span><a href="/tags/"><i class="fa fa-tags"></i>标签</a></span><span><a href="/about/"><i class="fa fa-user"></i>关于</a></span><span><a href="/gallery/"><i class="fa fa-picture-o"></i>nav.gallery</a></span><span><a href="/friends/"><i class="fa fa-hand-spock-o"></i>nav.friends</a></span></div></div></nav><div class="header-info"><div class="header-info-inner"><div class="header-info-title">Liuyib's Blog</div><div class="header-info-subtitle">write code and love life</div></div></div></header><main id="main"><div class="main-inner"><aside id="sidebar"><div class="sidebar-inner"><div class="sidebar-nav"><span class="sidebar-nav-toc current">文章目录</span><span class="sidebar-nav-overview">站点概览</span></div><section class="sidebar-toc"><div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#知识储备"><span class="toc-number">2.</span> <span class="toc-text">知识储备</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#模板引擎"><span class="toc-number">2.1.</span> <span class="toc-text">模板引擎</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css-预处理语言"><span class="toc-number">2.2.</span> <span class="toc-text">CSS 预处理语言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hexo-相关知识"><span class="toc-number">2.3.</span> <span class="toc-text">Hexo 相关知识</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#构建-hexo-开发环境"><span class="toc-number">2.3.1.</span> <span class="toc-text">构建 Hexo 开发环境</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#生成主题结构目录"><span class="toc-number">2.3.2.</span> <span class="toc-text">生成主题结构目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#通读文档"><span class="toc-number">2.3.3.</span> <span class="toc-text">通读文档</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#主题开发"><span class="toc-number">3.</span> <span class="toc-text">主题开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#是否支持平滑升级"><span class="toc-number">3.1.</span> <span class="toc-text">是否支持平滑升级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#页面搭建"><span class="toc-number">3.2.</span> <span class="toc-text">页面搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#暴露配置"><span class="toc-number">3.3.</span> <span class="toc-text">暴露配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据交互"><span class="toc-number">3.4.</span> <span class="toc-text">数据交互</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#技术细节"><span class="toc-number">3.5.</span> <span class="toc-text">技术细节</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#发布主题"><span class="toc-number">4.</span> <span class="toc-text">发布主题</span></a></li></ol></div></section><section class="hide sidebar-overview"><div class="sidebar-author"><img class="sidebar-author-avatar" src="https://raw.githubusercontent.com/liuyib/picBed/master/hexo-blog/20190528162910.jpg" alt="avatar"><p class="sidebar-author-motto">Write code and love life</p></div><div class="sidebar-social"><span class="sidebar-social-item"><a href="https://github.com/liuyib/" target="_blank" rel="noopener" data-popover="Github" data-popover-pos="up"><i class="fa fa-github"></i></a></span><span class="sidebar-social-item"><a href="https://segmentfault.com/u/liuyib/" target="_blank" rel="noopener" data-popover="思否" data-popover-pos="up"><span>sf</span></a></span><span class="sidebar-social-item"><a href="https://www.zhihu.com/people/liu-yibo-64-65/activities/" target="_blank" rel="noopener" data-popover="知乎" data-popover-pos="up"><span>知</span></a></span><span class="sidebar-social-item"><a href="https://juejin.im/user/5ad6b350f265da2397076275/" target="_blank" rel="noopener" data-popover="social.juejin" data-popover-pos="up"><span>掘</span></a></span></div><div class="sidebar-feed"><span class="sidebar-feed-email"><a href="http://eepurl.com/guAE6j" target="_blank" rel="noopener"><i class="fa fa-envelope sidebar-feed-icon"></i><span>Email </span><span>订阅</span></a></span><span class="sidebar-feed-rss"><a href="/atom.xml" target="_blank" rel="noopener"><i class="fa fa-rss sidebar-feed-icon"></i><span>RSS </span><span>订阅</span></a></span></div><div class="sidebar-state"><span class="sidebar-state-item sidebar-state-posts"><a href="/archives/"><div class="sidebar-state-item-count">4</div><div class="sidebar-state-item-name">归档</div></a></span><span class="sidebar-state-item sidebar-state-categories"><a href="/categories/"><div class="sidebar-state-item-count">4</div><div class="sidebar-state-item-name">分类</div></a></span><span class="sidebar-state-item sidebar-state-tags"><a href="/tags/"><div class="sidebar-state-item-count">8</div><div class="sidebar-state-item-name">标签</div></a></span></div><div class="sidebar-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg" alt="creative commons"></a></div></section><div class="sidebar-progress"><div class="sidebar-progress-read"><span>你已阅读了</span><span class="sidebar-progress-number"></span></div><div class="sidebar-progress-line"></div></div></div></aside><div class="content headings code-highlight"><header class="post-header"><h1 class="post-title">从0到1开发Hexo主题杂谈</h1><div class="post-meta"><span class="post-create"><i class="fa fa-calendar-o"></i><span>发表于 </span><span>2019-08-20</span></span><span class="post-update"><i class="fa fa-calendar-check-o"></i><span>更新于 </span><span>2019-08-22</span></span><span class="post-word-count"><i class="fa fa-file-word-o"></i><span>字数统计 </span><span>1.9k</span></span><span class="post-reading-time"><i class="fa fa-clock-o"></i><span>阅读时长 </span><span>11m</span></span><span class="post-reading-count"><i class="fa fa-eye"></i><span>阅读次数 </span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body"><h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2><p>在没有开发自己的 Hexo 主题之前，我都是在 Github Issue 里写<span class="external-link"><a href="https://github.com/liuyib/blog/issues" target="_blank" rel="noopener">博客</a><i class="fa fa-external-link"></i></span>，但这样的做法总被小伙伴各种吐槽 (￣_￣ )。又想到如果文章多的时候，使用 Github Issue 浏览起来不够方便，所以还是换回了 Hexo。</p><a id="more"></a><p>使用 Hexo 首先是要挑选喜欢的主题，以我个人的感受来讲，Hexo 的主题虽然有两百多个，但是能拿出手的也就不到二十个。其中我最佩服的主题 Next 已经足够优秀，但是风格我并不喜欢，最后决定自己开发。</p><p>本文记录了我从零开发 Hexo 主题时，遇到的所有坑和经验，<strong>仅供参考</strong>。</p><h2 id="知识储备"><a class="markdownIt-Anchor" href="#知识储备"></a> 知识储备</h2><h3 id="模板引擎"><a class="markdownIt-Anchor" href="#模板引擎"></a> 模板引擎</h3><p>传统的 HTML 写起来既不方便，又不能复用，因此在 Hexo 中通常使用模板引擎来呈现网站内容。</p><p>常用的几种模板引擎有：<span class="external-link"><a href="https://github.com/paularmstrong/swig" target="_blank" rel="noopener">Swig</a><i class="fa fa-external-link"></i></span>、<span class="external-link"><a href="https://github.com/hexojs/hexo-renderer-ejs" target="_blank" rel="noopener">EJS</a><i class="fa fa-external-link"></i></span>、<span class="external-link"><a href="https://github.com/hexojs/hexo-renderer-haml" target="_blank" rel="noopener">Haml</a><i class="fa fa-external-link"></i></span> 或 <span class="external-link"><a href="https://github.com/hexojs/hexo-renderer-jade" target="_blank" rel="noopener">Jade</a><i class="fa fa-external-link"></i></span>。其中 Jade 由于商标问题，改名为 <span class="external-link"><a href="https://github.com/pugjs/pug" target="_blank" rel="noopener">Pug</a><i class="fa fa-external-link"></i></span>，虽然它们是兼容的，但使用的时候，推荐安装 Pug 而不是 Jade。Hexo 内置了 Swig，将文件扩展名改为 <code>.swig</code> 即可使用，你也可以安装插件来获得另外几种模板引擎的支持，Hexo 会根据文件扩展名来决定使用哪一种。例如：</p><figure class="highlight plain"><div style="overflow:auto"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">layout.swig  -- 使用 swjg</span><br><span class="line">layout.pug   -- 使用 pug</span><br></pre></td></tr></tbody></table></div></figure><p>这里你需要做的是，选择一个自己喜欢的模板引擎，然后浏览文档，了解这个模板引擎的基本用法。由于我比较喜欢 Pug 的语法风格，因此选择了 Pug。</p><blockquote><p>在我开发主题的过程中，有一些功能，使用 Swig 实现起来很简单，而使用 Pug 提供的语法实现起来相对困难或只能换一种方式实现，这使我有很多次想放弃 Pug 使用 Swig 重构代码。因此这里建议，如果不是特别喜欢 Pug，还是不要使用。</p></blockquote><h3 id="css-预处理语言"><a class="markdownIt-Anchor" href="#css-预处理语言"></a> CSS 预处理语言</h3><p>开发 Hexo 主题，你可以使用最原始的 CSS 来写样式，但是 CSS 不能使用变量，不能复用，也没有函数，这会导致主题开发变得相对麻烦，<strong>甚至某些功能无法实现</strong>。因此最好是使用 CSS 预处理语言。</p><p>常见的 CSS 预处理语言有：<span class="external-link"><a href="http://lesscss.org/" target="_blank" rel="noopener">Less</a><i class="fa fa-external-link"></i></span>、<span class="external-link"><a href="https://sass-lang.com/" target="_blank" rel="noopener">Sass</a><i class="fa fa-external-link"></i></span>、<span class="external-link"><a href="http://stylus-lang.com/" target="_blank" rel="noopener">Stylus</a><i class="fa fa-external-link"></i></span>。至于它们的选择，根据自己的喜好即可，这里我选用了 Stylus。</p><h3 id="hexo-相关知识"><a class="markdownIt-Anchor" href="#hexo-相关知识"></a> Hexo 相关知识</h3><p>有关 Hexo 的知识，这里只列举必要的部分。</p><h4 id="构建-hexo-开发环境"><a class="markdownIt-Anchor" href="#构建-hexo-开发环境"></a> 构建 Hexo 开发环境</h4><p>开发主题之前，你需要搭建自己的 Hexo 工作目录，有两种方式可供选择：</p><ol><li>使用 <code>hexo-cli</code></li><li>克隆 Hexo 主题的单元测试项目</li></ol><p>第一种方式，去 Hexo <span class="external-link"><a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">官网</a><i class="fa fa-external-link"></i></span>，按照提示安装 <code>hexo-cli</code> 并生成你的 Hexo 工作目录，目录主要部分如下：</p><figure class="highlight plain"><div style="overflow:auto"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source</span><br><span class="line">|   └── _posts</span><br><span class="line">├── themes</span><br><span class="line">├── .gitignore</span><br><span class="line">├── _config.yml</span><br><span class="line">└── package.json</span><br></pre></td></tr></tbody></table></div></figure><p>第二种方式，克隆 Hexo 官方的<span class="external-link"><a href="https://github.com/hexojs/hexo-theme-unit-test" target="_blank" rel="noopener">单元测试库</a><i class="fa fa-external-link"></i></span>，这样会得到同上的文件目录。然后执行指令 <code>npm install</code> 安装所有依赖。</p><p>对于一般的 Hexo 用户，都是使用第一种方式。不过对于 Hexo 主题开发者来说，如果你的主题将来要发布到 Hexo 的<span class="external-link"><a href="https://hexo.io/themes" target="_blank" rel="noopener">主题列表</a><i class="fa fa-external-link"></i></span>，建议直接在 Hexo 的主题单元测试项目中进行开发，也就是第二种方式。原因是因为 Hexo 建议在主题发布前，先进行主题单元测试，确保每一项功能都能正常使用。Hexo 提供的单元测试库包括了所有的边缘情况，直接在上面开发就可以在开发时注意到这些边缘情况，而不是开发完再去测试。</p><p>搭建完 Hexo 开发环境后，安装相关插件来支持你所使用的渲染引擎。Hexo 默认安装的渲染引擎是 <code>ejs</code> 和 <code>stylus</code>，如果你选择了其他的，需要自行选择安装：</p><figure class="highlight bash"><div style="overflow:auto"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Templates</span></span><br><span class="line">$ npm install --save hexo-renderer-ejs</span><br><span class="line">$ npm install --save hexo-render-pug</span><br><span class="line">$ npm install --save hexo-render-haml</span><br><span class="line"></span><br><span class="line"><span class="comment"># Styles</span></span><br><span class="line">$ npm install --save hexo-renderer-less</span><br><span class="line">$ npm install --save hexo-renderer-sass</span><br><span class="line">$ npm install --save hexo-renderer-stylus</span><br></pre></td></tr></tbody></table></div></figure><h4 id="生成主题结构目录"><a class="markdownIt-Anchor" href="#生成主题结构目录"></a> 生成主题结构目录</h4><p>上一步只是搭建好了 Hexo 工作目录，接下来是创建主题的文件目录，你可以参考着已有的主题的文件目录手动创建，也可以使用 <code>Yeoman</code> 自动生成，使用 <code>Yeoman</code> 自动生成的步骤如下。</p><ol><li>安装</li></ol><figure class="highlight bash"><div style="overflow:auto"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --global yo</span><br><span class="line">$ npm install --global generator-hexo-theme</span><br></pre></td></tr></tbody></table></div></figure><ol start="2"><li>生成</li></ol><p>进入 Hexo 的 <code>themes</code> 目录中，新建一个文件夹作为你的主题目录，然后进入该文件夹中，执行指令：</p><figure class="highlight bash"><div style="overflow:auto"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yo hexo-theme</span><br></pre></td></tr></tbody></table></div></figure><p>按照提示，填写或选择相应的信息，如下图：</p><p><img src="/images/loading.svg" alt class="lazyload gif" data-src="https://raw.githubusercontent.com/liuyib/picBed/master/hexo-theme-stun/doc/20190822211939.png"></p><p>生成的文件目录如下：</p><figure class="highlight plain"><div style="overflow:auto"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── layout        # 布局文件夹</span><br><span class="line">|   ├── includes</span><br><span class="line">|   |   ├── layout.pug       # 页面总体布局</span><br><span class="line">|   |   └── recent-posts.pug # 文章列表</span><br><span class="line">|   ├── index.pug            # 首页</span><br><span class="line">|   ├── archive.pug          # 归档页</span><br><span class="line">|   ├── category.pug         # 分类页</span><br><span class="line">|   ├── tag.pug              # 标签页</span><br><span class="line">|   ├── post.pug             # 文章页</span><br><span class="line">|   └── page.pug             # 除以上页面之外的页面</span><br><span class="line">├── scripts       # 脚本文件夹</span><br><span class="line">├── source        # 资源文件夹</span><br><span class="line">|   ├── css</span><br><span class="line">|   ├── js</span><br><span class="line">|   └── favicon.ico</span><br><span class="line">├── .editorconfig # 编辑器配置文件</span><br><span class="line">├── _config.yml   # 主题配置文件</span><br><span class="line">└── package.json</span><br></pre></td></tr></tbody></table></div></figure><p>当然只有这些文件目录是不够的，我们还需要另外添加一些其他的文件或目录，例如，<code>languages</code> 目录，放置语言文件，用于<span class="external-link"><a href="https://hexo.io/zh-cn/docs/internationalization" target="_blank" rel="noopener">国际化（i18n）</a><i class="fa fa-external-link"></i></span>设置。</p><p>有关以上目录的详细介绍，请参见：<span class="external-link"><a href="https://hexo.io/zh-cn/docs/themes" target="_blank" rel="noopener">Hexo 主题</a><i class="fa fa-external-link"></i></span>。</p><p>这里需要提一下，主题目录和 Hexo 根目录中各有一个 <code>source</code> 文件夹，当你执行指令 <code>hexo generate</code> 来生成静态文件时，这两个 <code>source</code> 目录中的文件如果是 markdown 会被解析为 HTML，其他不能解析的文件，会被复制到 <code>public</code> 目录中。<code>public</code> 目录用于存放生成的静态文件，这些静态文件就是线上跑的网站文件。因此，如果你不清楚 <code>source</code> 目录里文件的使用路径是怎样的，那么你可以跑一下指令 <code>hexo generate</code>，这些文件生成到 <code>public</code> 目录中后，它们的路径关系就明显了。</p><h4 id="通读文档"><a class="markdownIt-Anchor" href="#通读文档"></a> 通读文档</h4><p>虽然 Hexo 的文档确实很差劲，文档下面的评论区全是吐槽，而且有些部分中英文版本没有同步，但是如果能耐心读完，会有很大的收益，我个人的最大感受是 Hexo 的文档真的特别重要。当然一次掌握是不可能的，最好在开发时每隔一段时间过一遍。</p><p>刚开始开发主题，不可能理解 Hexo 文档中提到的所有地方，但是有两个点必须首先掌握：<span class="external-link"><a href="https://hexo.io/zh-cn/docs/variables" target="_blank" rel="noopener">变量</a><i class="fa fa-external-link"></i></span>和<span class="external-link"><a href="https://hexo.io/zh-cn/docs/helpers" target="_blank" rel="noopener">辅助函数</a><i class="fa fa-external-link"></i></span>，这两点在开发时会经常用到，并且贯穿整个开发过程。</p><h2 id="主题开发"><a class="markdownIt-Anchor" href="#主题开发"></a> 主题开发</h2><p>有了上述的充足准备后，就可以开始主题的开发了。</p><h3 id="是否支持平滑升级"><a class="markdownIt-Anchor" href="#是否支持平滑升级"></a> 是否支持平滑升级</h3><p>// 平滑升级特性</p><h3 id="页面搭建"><a class="markdownIt-Anchor" href="#页面搭建"></a> 页面搭建</h3><p>// 搭建页面骨架的思路</p><h3 id="暴露配置"><a class="markdownIt-Anchor" href="#暴露配置"></a> 暴露配置</h3><p>// _config.yml 和 stun.yml</p><h3 id="数据交互"><a class="markdownIt-Anchor" href="#数据交互"></a> 数据交互</h3><blockquote><p>pug，stylus，js，_config.yml 文件之间的数据交互<br>有关 pug 需要提到的语法拓展 <code>script.</code> 等</p></blockquote><blockquote><p>要在script标签里写js代码的话，需要在script后面加个点：script.<br>如果只是单纯填充某个变量，用!{xxx}就行了。但是如果该变量是个对象的话，则需要通过JSON.stringify先字符串化。具体可以看上面的代码。</p></blockquote><h3 id="技术细节"><a class="markdownIt-Anchor" href="#技术细节"></a> 技术细节</h3><p>// 说说自己使用的一些配置文件，依赖库，如何优化等</p><h2 id="发布主题"><a class="markdownIt-Anchor" href="#发布主题"></a> 发布主题</h2><p><code>source/_data/themes.yml</code></p><figure class="highlight yaml"><div style="overflow:auto"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">- name:</span> <span class="string">stun</span></span><br><span class="line"><span class="attr">  description:</span> <span class="string">A</span> <span class="string">beautiful</span> <span class="string">&</span> <span class="string">simple</span> <span class="string">theme</span></span><br><span class="line"><span class="attr">  link:</span> <span class="attr">https://github.com/liuyib/hexo-theme-stun</span></span><br><span class="line"><span class="attr">  preview:</span> <span class="attr">https://liuyib.github.io/</span></span><br><span class="line"><span class="attr">  tags:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">responsive</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">beautiful</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">simple</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">two_column</span></span><br></pre></td></tr></tbody></table></div></figure></div><footer class="post-footer"><div class="post-footer-end"><span>------</span><span>本文结束，感谢您的阅读</span><span>------</span></div><div class="post-copyright"><div class="copyright-author"><span class="copyright-name">本文作者:</span><span class="copyright-value"><a href="https://liuyib.github.io">liuyib</a></span></div><div class="copyright-link"><span class="copyright-name">本文链接:</span><span class="copyright-value"><a href="https://liuyib.github.io/2019/08/20/从0到1开发Hexo主题杂谈/">https://liuyib.github.io/2019/08/20/从0到1开发Hexo主题杂谈/</a></span></div><div class="copyright-notice"><span class="copyright-name">版权声明:</span><span class="copyright-value">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">BY-NC-SA</a> 许可协议。转载请注明出处！</span></div></div><div class="post-footer-tags"><i class="fa fa-tags icon"></i><span><a href="https://liuyib.github.io/tags/hexo-theme/" title="hexo-theme">hexo-theme</a></span><span><a href="https://liuyib.github.io/tags/hexo/" title="hexo">hexo</a></span></div><div id="reward"><div class="reward-button">请我喝杯咖啡~</div><div class="reward-qr-wrapper"><div class="reward-qr"><span class="reward-qr-alipay"><img src="https://raw.githubusercontent.com/liuyib/picBed/master/hexo-blog/20190529222805.png"><div class="reward-qr-alipay-text">支付宝打赏</div></span><span class="reward-qr-wechat"><img src="https://raw.githubusercontent.com/liuyib/picBed/master/hexo-blog/20190529222806.png"><div class="reward-qr-wechat-text">微信打赏</div></span></div></div></div><nav id="paginator"><div class="post-paginator"><div class="article-next pull-right"><a href="/2019/07/26/theme-stun-gitter/"><span class="title">theme-stun-gitter</span><i class="fa fa-chevron-right"></i></a></div></div></nav></footer></div><div class="comments content" id="comments"><div id="gitalk-container"></div></div><div class="clearfix"></div></div></main><footer id="footer"><div class="footer-inner"><div><span>© 2019</span><span class="fa fa-heart heart-beat footer-separator" style="color:red"></span><span>liuyib. All Rights Reserved.</span></div><div><span class="footer-powered">由 <a href="http://hexo.io/" title="hexo" target="_blank" rel="noopener">hexo</a> 强力驱动</span><span> v3.9.0.</span><span class="footer-separator">|</span><span>主题 - <a href="https://github.com/liuyib/hexo-theme-stun/" title="stun" target="_blank" rel="noopener">stun</a></span><span> v1.2.3.</span></div><div class="busuanzi"><span class="busuanzi-uv"><i class="fa fa-user"></i><span>访问人数 </span><span id="busuanzi_value_site_uv"></span></span><span class="separator">|</span><span class="busuanzi-pv"><i class="fa fa-eye"></i><span>浏览总量 </span><span id="busuanzi_value_site_pv"></span></span></div><div><span>托管于 <a href="https://pages.github.com/" rel="noopener" target="_blank">Github Pages</a></span></div></div></footer><div id="back-top"><div class="back-top-inner" data-popover="回到顶部" data-popover-pos="up"><i class="fa fa-rocket"></i></div></div></div><div class="search-mask"></div><div class="search-popup"><span class="search-close"></span><div class="search-input"><input placeholder="搜索文章"></div><div class="search-results"></div></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/ribbon.js@latest/dist/ribbon.min.js" size="120" alpha="0.6" zindex="-1"></script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lazyload@2.0.0-rc.2/lazyload.min.js"></script><script async src="https://cdn.jsdelivr.net/gh/sukkaw/busuanzi@latest/bsz.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-md5@latest/src/md5.min.js"></script><script>window.addEventListener("load",function(){new Gitalk({id:md5("2019/08/20/从0到1开发Hexo主题杂谈/"),clientID:"f9773b8f4bf0eab8bdf7",clientSecret:"b8cf368c44428ae4d7c9d0ec634532219e8cdf67",repo:"liuyib.github.io",owner:"liuyib",admin:["liuyib"],distractionFreeMode:"true",language:"zh-CN"}).render("gitalk-container")})</script><script>window.addEventListener("load",function(){$(".header-nav-search").on("click",function(t){t.stopPropagation(),$("body").css("overflow","hidden"),$(".search-popup").velocity("stop").velocity("transition.expandIn",{duration:300,complete:function(){$(".search-popup input").focus()}}),$(".search-mask").velocity("stop").velocity("transition.fadeIn",{duration:300}),$.ajax({url:e,dataType:r?"xml":"json",async:!0,success:function(t){var n=r?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,o=$(".search-input input"),i=$(".search-results"),m={title:100,content:1},e=function(){var t=o.val().toLowerCase().trim(),x=t.split(/[\s]+/),$=[];1<x.length&&x.push(t),0<t.length&&n.forEach(function(t){var e=!1,n=t.title&&t.title.trim()||"( 文章无标题 )",o=n&&n.toLowerCase(),i=t.content&&t.content.replace(/<[^>]+>|\s+/,""),r=i&&i.toLowerCase(),c=t.url&&decodeURI(t.url).replace(/\/{2,}/,"/"),a=[],s=[];x.forEach(function(t){function e(e,t,n,o){if(!e||!t)return[];var i=0,r=-1,c=[];for(n||(e=e.toLowerCase(),t=t.toLowerCase());-1!==(r=t.indexOf(e,i));){var s=!1;a.forEach(function(t){t.index===r&&t.word.length<e.length&&(t.word=e,s=!0)}),i=r+e.length,!s&&c.push({index:r,word:e,weight:o})}return c}a=a.concat(e(t,o,!1,m.title)),s=s.concat(e(t,r,!1,m.content))});var l=a.length,u=s.length;if((0<l||0<u)&&(e=!0),e){function h(n,t,e,o){if(n&&t&&t.length){var i="",r=e,c=o;return t.forEach(function(t){if(!(t.index<r)){var e=t.index+t.word.length;i+=n.slice(r,t.index),i+="<b>"+n.slice(t.index,e)+"</b>",r=e}}),i+=n.slice(r,c)}}[a,s].forEach(function(t){t.sort(function(t,e){return t.index-e.index})});var d,f={},p=100*a.length+s.length,v=h(n,a,0,n.length)||n;if(0<s.length){var g=s[0].index,y=20<g?g-20:0,w=g+180;d=h(i,s,y,w)}else d=i.slice(0,200);f.title=v,f.content=d,f.url=c,f.weight=p,$.push(f)}});var e="<ul>";$.sort(function(t,e){return e.weight-t.weight}),$.forEach(function(t){e+='<li><a class="search-results-title" href="'+t.url+'">',e+=t.title,e+='</a><div class="search-results-content">',e+=t.content,e+="</div></li>"}),e+="</ul>",i.html(e)};o.on("input",e),o.on("keypress",function(t){t.keyCode===Stun.utils.codeToKeyCode("Enter")&&e()})}})}),$(".search-mask, .search-close").on("click",function(){n()}),$(document).on("keydown",function(t){t.keyCode===Stun.utils.codeToKeyCode("Escape")&&n()});var r=!0,t="search.json";t?/json$/i.test(t)&&(r=!1):t="search.xml";var e="/"+t;function n(){$("body").css("overflow","auto"),$(".search-popup").velocity("stop").velocity("transition.expandOut",{duration:300}),$(".search-mask").velocity("stop").velocity("transition.fadeOut",{duration:300})}})</script><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js?t=1566650914414").then(function(){console.log("ServiceWorker Register Successfully.")}).catch(function(e){console.error(e)})</script><script type="text/javascript" src="/js/bundle.min.js"></script></body></html>